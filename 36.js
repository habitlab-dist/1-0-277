window.habitlab_content_script = true;

(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"./src/components/call-to-action-button.deps.js":function(t,o,e){const{import_dom_modules:n}=e("./src/libs_frontend/dom_utils.ls");e("./src/bower_components/habitlab-paper-button/habitlab-paper-button.deps.js"),n(e("./src/components/call-to-action-button.html"),"components/call-to-action-button.html"),e("./src/components/call-to-action-button.js")},"./src/components/call-to-action-button.html":function(t,o){t.exports="<link rel=import href=../bower_components/habitlab-paper-button/habitlab-paper-button.html> <habitlab-dom-module id=call-to-action-button> <template> <style>:host{display:var(--call-to-action-button-display,inline-block);min-height:var(--call-to-action-button-min-height,38px);width:var(--call-to-action-button-width);margin:var(--call-to-action-button-margin,0 0 0 0)}.call-to-action-button{cursor:pointer;color:var(--call-to-action-button-color,#fff);background-color:var(--call-to-action-button-bg-color,#415D67);margin:0 auto;width:100%;height:100%;box-shadow:var(--call-to-action-button-shadow,2px 2px 2px #888)}</style> <habitlab-paper-button class=call-to-action-button on-click=buttonClicked>{{buttonText}}</habitlab-paper-button> </template> <script src=call-to-action-button.js><\/script> </habitlab-dom-module>"},"./src/components/call-to-action-button.js":function(t,o,e){const{polymer_ext:n}=e("./src/libs_frontend/polymer_utils.ls"),{log_action:_}=e("./src/libs_frontend/intervention_log_utils.ls"),{get_intervention:i,get_goal_info:s}=e("./src/libs_common/intervention_info.ls"),{close_tab_with_id:a}=e("./src/generated_libs/libs_frontend/tab_utils.js"),{get_tab_id:r}=e("./src/libs_common/intervention_info.ls");n({is:"call-to-action-button",properties:{goal:{type:Object},buttonText:{type:String,computed:"computeButtonText(goal)"}},ready:function(){this.goal=s()},buttonClicked:function(){if(this.goal.is_positive){_({positive:"habitlab-positive-goal-site-button clicked"});var t=this.goal.domain;-1==t.search("http")&&(t="https://"+t),window.location.href=t}else _({positive:"habitlab-close-tab-button clicked"}),a(r())},computeButtonText:function(t){return null!=t.call_to_action?t.call_to_action:t.is_positive?t.description:"Close "+s().sitename_printable}})},"./src/components/habitlab-positive-goal-site-button.deps.js":function(t,o,e){const{import_dom_modules:n}=e("./src/libs_frontend/dom_utils.ls");e("./src/bower_components/habitlab-paper-button/habitlab-paper-button.deps.js"),n(e("./src/components/habitlab-positive-goal-site-button.html"),"components/habitlab-positive-goal-site-button.html"),e("./src/components/habitlab-positive-goal-site-button.ls")},"./src/components/habitlab-positive-goal-site-button.html":function(t,o){t.exports="<link rel=import href=../bower_components/habitlab-paper-button/habitlab-paper-button.html> <habitlab-dom-module id=habitlab-positive-goal-site-button> <template> <style>:host{display:var(--call-to-action-button-display,inline-block);height:var(--call-to-action-button-height,38px);width:var(--call-to-action-button-width);margin:var(--call-to-action-button-margin,0 0 0 0)}.habitlab-positive-goal-site-button{cursor:pointer;color:var(--call-to-action-button-color,#fff);font-size:var(--call-to-action-button-font-size,14px);background-color:var(--call-to-action-button-bg-color,#009b37);margin:0 auto;width:100%;height:100%;box-shadow:var(--call-to-action-button-shadow,2px 2px 2px #888)}</style> <habitlab-paper-button class=habitlab-positive-goal-site-button on-click=button_clicked>{{buttontext}}</habitlab-paper-button> </template> <script src=habitlab-positive-goal-site-button.js><\/script> </habitlab-dom-module>"},"./src/components/habitlab-positive-goal-site-button.ls":function(t,o,e){var n,_,i;n=e("./src/libs_frontend/intervention_log_utils.ls").log_action,e("./src/libs_common/intervention_info.ls").get_intervention,_=e("./src/generated_libs/libs_frontend/goal_utils.js").get_random_uncompleted_positive_goal,i=e("./src/libs_common/localization_utils.js").msg,Polymer({is:"habitlab-positive-goal-site-button",properties:{goal:{type:Object,observer:"goalChanged"},buttontext:String},goalChanged:function(){return this.buttontext=i(this.goal.call_to_action+"")},button_clicked:function(){var t;return n({positive:"habitlab-positive-goal-site-button clicked"}),-1===(t=this.goal.domain).search("http")&&(t="https://"+t),window.location.href=t},ready:async function(){return this.goal=await _()}})},"./src/generated_libs/libs_frontend/db_utils.js":function(t,o,e){const{import_lib:n}=e("./src/libs_frontend/import_lib.ls");t.exports=n("db_utils")},"./src/libs_common/common_libs.ls":function(t,o){var e,n=void 0!==o&&o||this;n.sleep=e=async function(t){return new Promise(function(o){return setTimeout(o,t)})},n.once_true=async function(t,o){var n;for(n=t();!n;)n=t(),await e(100);null!=o&&o()},n.run_only_one_at_a_time=function(t){var o;return o=!1,function(){if(!o)return o=!0,t(function(){return o=!1})}},n.run_every_timeperiod=function(t,o){var e;return e=Date.now(),t(),setInterval(function(){var n;if(n=Date.now(),e+o<n)return e=n,t()},1e3)}},"./src/libs_common/domain_utils.ls":function(module,exports,__webpack_require__){var ref$,gexport,gexport_module,url_to_domain,domain_to_url,out$=void 0!==exports&&exports||this;ref$=__webpack_require__("./src/libs_common/gexport.ls"),gexport=ref$.gexport,gexport_module=ref$.gexport_module,out$.url_to_domain=url_to_domain=function(t){return t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0]},out$.domain_to_url=domain_to_url=function(t){return"http://"+url_to_domain(t)+"/"},gexport_module("domain_utils",function(it){return eval(it)})},"./src/libs_common/time_spent_utils.ls":function(module,exports,__webpack_require__){var moment,prelude,ref$,getkey_dictdict,getdict_for_key_dictdict,getdict_for_key2_dictdict,getCollection,setkey_dict,getkey_dict,url_to_domain,get_days_since_epoch,get_session_id,gexport,gexport_module,get_seconds_spent_on_all_domains_today,get_seconds_spent_on_all_domains_days_before_today,get_seconds_spent_on_domain_all_days,get_seconds_spent_on_domain_days_before_today,get_seconds_spent_on_domain_today,get_minutes_spent_on_domain_today,get_seconds_spent_on_current_domain_today,get_visits_to_domain_today,get_visits_to_domain_days_before_today,get_visits_to_current_domain_today,get_new_session_id_for_domain,get_seconds_spent_on_current_domain_in_session,get_seconds_spent_on_domain_in_session,get_seconds_spent_on_current_domain_in_current_session,out$=void 0!==exports&&exports||this;moment=__webpack_require__("./node_modules/moment/moment.js"),prelude=__webpack_require__("./node_modules/prelude-ls/lib/index.js"),ref$=__webpack_require__("./src/generated_libs/libs_frontend/db_utils.js"),getkey_dictdict=ref$.getkey_dictdict,getdict_for_key_dictdict=ref$.getdict_for_key_dictdict,getdict_for_key2_dictdict=ref$.getdict_for_key2_dictdict,getCollection=ref$.getCollection,setkey_dict=ref$.setkey_dict,getkey_dict=ref$.getkey_dict,url_to_domain=__webpack_require__("./src/libs_common/domain_utils.ls").url_to_domain,get_days_since_epoch=__webpack_require__("./src/libs_common/time_utils.ls").get_days_since_epoch,get_session_id=__webpack_require__("./src/libs_common/intervention_info.ls").get_session_id,ref$=__webpack_require__("./src/libs_common/gexport.ls"),gexport=ref$.gexport,gexport_module=ref$.gexport_module,out$.get_seconds_spent_on_all_domains_today=get_seconds_spent_on_all_domains_today=async function(){return await getdict_for_key2_dictdict("seconds_on_domain_per_day",get_days_since_epoch())},out$.get_seconds_spent_on_all_domains_days_before_today=get_seconds_spent_on_all_domains_days_before_today=async function(t){return await getdict_for_key2_dictdict("seconds_on_domain_per_day",get_days_since_epoch()-t)},out$.get_seconds_spent_on_domain_all_days=get_seconds_spent_on_domain_all_days=async function(t){var o,e,n,_,i;for(_ in o=await getdict_for_key_dictdict("seconds_on_domain_per_day",t),e=get_days_since_epoch(),n={},o)i=o[_],n[e-_]=i;return n},out$.get_seconds_spent_on_domain_days_before_today=get_seconds_spent_on_domain_days_before_today=async function(t,o){var e,n;return e=get_days_since_epoch(),null!=(n=await getkey_dictdict("seconds_on_domain_per_day",t,e-o))?n:0},out$.get_seconds_spent_on_domain_today=get_seconds_spent_on_domain_today=async function(t){var o,e;return o=get_days_since_epoch(),null!=(e=await getkey_dictdict("seconds_on_domain_per_day",t,o))?e:0},out$.get_minutes_spent_on_domain_today=get_minutes_spent_on_domain_today=async function(t){var o,e;return o=get_days_since_epoch(),null!=(e=await getkey_dictdict("seconds_on_domain_per_day",t,o))?Math.floor(e/60):0},out$.get_seconds_spent_on_current_domain_today=get_seconds_spent_on_current_domain_today=async function(){var t,o;return t=window.location.host,null!=(o=await get_seconds_spent_on_domain_today(t))?o:0},out$.get_visits_to_domain_today=get_visits_to_domain_today=async function(t){var o,e;return o=get_days_since_epoch(),null!=(e=await getkey_dictdict("visits_to_domain_per_day",t,o))?e:0},out$.get_visits_to_domain_days_before_today=get_visits_to_domain_days_before_today=async function(t,o){var e,n;return e=get_days_since_epoch(),null!=(n=await getkey_dictdict("visits_to_domain_per_day",t,e-o))?n:0},out$.get_visits_to_current_domain_today=get_visits_to_current_domain_today=async function(){var t,o;return t=window.location.host,null!=(o=await get_visits_to_domain_today(t))?o:0},out$.get_new_session_id_for_domain=get_new_session_id_for_domain=async function(t){var o;return null==(o=await getkey_dict("domain_to_last_session_id",t))?(await setkey_dict("domain_to_last_session_id",t,0),0):(await setkey_dict("domain_to_last_session_id",t,o+1),o+1)},out$.get_seconds_spent_on_current_domain_in_session=get_seconds_spent_on_current_domain_in_session=async function(t){var o,e;return o=window.location.host,null!=(e=await get_seconds_spent_on_domain_in_session(o,t))?e:0},out$.get_seconds_spent_on_domain_in_session=get_seconds_spent_on_domain_in_session=async function(t,o){var e;return null!=(e=await getkey_dictdict("seconds_on_domain_per_session",t,o))?e:0},out$.get_seconds_spent_on_current_domain_in_current_session=get_seconds_spent_on_current_domain_in_current_session=async function(){var t,o,e;return t=get_session_id(),o=window.location.host,null!=(e=await get_seconds_spent_on_domain_in_session(o,t))?e:0},gexport_module("time_spent_utils",function(it){return eval(it)})},"./src/libs_common/time_utils.ls":function(module,exports,__webpack_require__){var moment,ref$,gexport,gexport_module,get_days_since_epoch,pad_to_two_digits,printable_time_spent_short,printable_time_spent,printable_time_spent_long,out$=void 0!==exports&&exports||this;moment=__webpack_require__("./node_modules/moment/moment.js"),ref$=__webpack_require__("./src/libs_common/gexport.ls"),gexport=ref$.gexport,gexport_module=ref$.gexport_module,out$.get_days_since_epoch=get_days_since_epoch=function(){var t;return t=moment().year(2016).month(0).date(1).hours(0).minutes(0).seconds(0).milliseconds(0),moment().diff(t,"days")},pad_to_two_digits=function(t){var o;return 1===(o=t.toString()).length?"0"+o:o},out$.printable_time_spent_short=printable_time_spent_short=function(t){var o;return t<0?"00:00":(o=Math.floor(t/60))+":"+pad_to_two_digits(t-=60*o)},out$.printable_time_spent=printable_time_spent=function(t){return t<60?t+" seconds":moment().add(t,"seconds").fromNow(!0)},out$.printable_time_spent_long=printable_time_spent_long=function(t){var o,e,n,_;return t<0?"0 seconds":(e=t-3600*(o=Math.floor(t/3600)),e-=60*(n=Math.floor(e/60)),_=[],o>0&&(1===o?_.push("1 hour"):_.push(o+" hours")),(n>0||o>0)&&(1===n?_.push("1 minute"):_.push(n+" minutes")),1===e?_.push("1 second"):e>=0&&_.push(e+" seconds"),_.join(" "))},gexport_module("time_utils",function(it){return eval(it)})}}]);